\chapter{Конструкторский раздел}


В данном разделе представлены требования к программному обеспечению, а также схемы алгоритмов, выбранных для решения поставленной задачи.

\textbf{Программа должна предоставлять следующий функционал:}
\begin{itemize}
	\item создание сцены с определенным размером;
	\item размещение, удаление и перемещение отдельных объектов сцены;
	\item добавление источника света;
	\item поворот, перемещение и масштабирование сцены  с объектами.
\end{itemize}

\textbf{Программа должна соответствовать следующим критериям: }
\begin{itemize}
	\item Для обеспечения плавной и корректной интерактивной работы необходимо, чтобы время, в течение которого программа реагирует на действия пользователя, составляло менее одной секунды.
	\item обеспечение корректного реагирования на все действия пользователя.
\end{itemize}


\section{Z-буферный алгоритм}

\subsection{Формальная запись}
\begin{enumerate}
	\item инициализировать кадровый буфер и $z_{\text{буфер}}$;
	\item кадровый буфер заполнить фоном и $z_{\text{буфер}}$ заполнить  минимальным значением $z$;
	\item для каждого многоугольника сцены;
	\begin{enumerate}[label=\arabic{enumi}.\arabic*]
		\item  для каждого пикселя $(x, y)$ в многоугольнике вычислить его глубину $z(x, y)$;
		\begin{enumerate}
			\item  сравнить глубину $z(x, y)$ со значением  $z_{\text{буфер}}$, хранящимся в $z_{\text{буфер}}$ в этой же позиции. 
			
			Если  $z(x, y) > z_{\text{буфер}}(x, y) \Rightarrow z_{\text{буфер}}(x, y) = z(x, y) $ и записать атрибут этого многоугольника (интенсивность, цвет и т. п.);
			
			\item в противном случае никаких действий не производить;
		\end{enumerate}
	\end{enumerate}
	
	\item вывести изображение.
\end{enumerate}


\includeimage
{zbuf} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
{f} % Обтекание (без обтекания)
{h} % Положение рисунка (см. figure из пакета float)
{0.3\textwidth} % Ширина рисунка
{Визуализация состояния Z-буфера} % Подпись рисунк


\clearpage


\includeimage
{zalg} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
{f} % Обтекание (без обтекания)
{h} % Положение рисунка (см. figure из пакета float)
{0.3\textwidth} % Ширина рисунка
{Схема алгоритма Z-буфера} % Подпись рисунк


\clearpage



\section{Модифицированный Z-буферный алгоритм}

\subsection{Формальная запись}

\begin{enumerate}
	\item для каждого источника света.
	
	\begin{enumerate}[label=\arabic{enumi}.\arabic*]
		\item инициализировать Z-буфер (буфер глубины)  и буфер теней, в дальнейшем БГ и БТ, соответственно;
		\item заполнить БГ минимальными значениями глубины.
		Заполнить БТ значениями, указывающими отсутствие тени.
	\end{enumerate}
	
	\item выполнить Z-буферный алгоритм для точки наблюдения, параллельно проверяя видимость поверхности от текущей точки наблюдения и источников света;
	\item для каждого источника света;
	
	\begin{enumerate}[label=\arabic{enumi}.\arabic*]
		\item преобразовать координаты рассматриваемой точки, наблюдателя $(x, y, z)$ в координаты точки источника света $(x', y', z')$;
		\item если $z'(x', y') < БТ(x', y')$, то пиксел высвечивается с учетом его затемнения;
		\item  иначе точка высвечивается без затемнения.
	\end{enumerate}
	
	
\end{enumerate}


\includeimage
	{zzalg} % Имя файла без расширения (файл должен быть расположен в директории inc/img/)
	{f} % Обтекание (без обтекания)
	{h} % Положение рисунка (см. figure из пакета float)
	{0.3\textwidth} % Ширина рисунка
	{Схема модифицированного алгоритма Z-буфера} % Подпись рисунк

\clearpage


\section{Выбор используемых типов и структур данных}


\begin{enumerate}
	\item точка задается координатами $(x, y, z)$;
	\item полигон задается тремя точками и храниться в массиве;
	\item объект сцены, например: дом или дорога, задается полигонами в виде массива;
	\item источник света задается углом, по осям $X$ и $Y$ относительно точки наблюдателя. 
\end{enumerate}


\section*{Вывод}
\textbf{В этом разделе были разобраны следующие элементы:}
\begin{enumerate}
	\item требования к разрабатываемому программному обеспечению;
	\item разработана схема разрабатываемого алгоритма;
	\item описаны структуры данных, которые будут использоваться при реализации  программного обеспечения.
\end{enumerate}


